<div class="flex justify-content-center">
  <div class="hidden md:inline-block md:col-4 lg:col-3  pl-6 mt-2">

    <div class="text-xl font-medium text-900 mb-3 align-items-center flex">
      <i class="pi pi-user mr-2" style="font-size: 1.4rem; color: #22C55E;"></i>
      <span>Your Profile</span>
    </div>
    <div class="surface-card p-3 shadow-2 border-round m-0">
      <div class="flex justify-content-center mt-2">
        <img *ngIf="profile?.file" alt="Logo Class" src="{{src}}" class="border-circle"
          style="height: 103px; width: 103px; object-fit : cover;">
        <i *ngIf="!profile?.file"
          class="pi pi-user border-1 border-circle flex align-items-center justify-content-center bg-gray-50"
          style="font-size: 2.5rem; color: #a6a8a7; height: 103px; width: 103px;"></i>
      </div>
      <div class="col flex py-1 mt-2 justify-content-center">
        <p class="text-base" style="font-weight: 500;">{{profile?.fullName}}</p>
      </div>
      <div class="col flex py-0 justify-content-center">
        <p class="text-sm" style="font-weight: 400;">{{profile?.job?.positionName}}</p>
      </div>
      <div class="col py-3 justify-content-center flex">
        <div class="col-8 gap-5 justify-content-center flex">
          <div *ngFor="let data of profile?.profileSocialMedia">
            <a *ngIf="data.username" href="{{data.profileLink}}" target="_blank"> <i
                class="pi {{data.socialMedia.socialMediaIcon}} mr-2 hover:bg-green-50"
                style="font-size: 22px; font-weight: 500; color: #a4a4a4;">
              </i></a>
          </div>
        </div>
      </div>

      <div class="justify-content-center flex py-0">
        <div class="col-12 align-items-center">
          <p class="align-items-center flex" style="font-size: 0.875rem; font-weight: 500;"> <i class="pi pi-user mr-2"
              style="font-size: 14px; font-weight: 500; color: #2b2b2b;"></i>Profile Details</p>

          <p-divider></p-divider>

          <div class="my-3 align-items-center">
            <p class="align-items-center flex mb-1 text-sm" style="font-weight: 400; color: #878787;"> <i
                class="pi pi-envelope mr-2" style="font-size: 13px; font-weight: 500; color: #878787;"></i>Email</p>
            <p style="font-size: 0.875rem; font-weight: 400;">{{email}}</p>
          </div>

          <div class="my-3 align-items-center">
            <p class="mb-1 text-sm" style="font-weight: 400; color: #878787;"><i class="pi pi-phone mr-2"
                style="font-size: 13px; font-weight: 500; color: #878787;"></i>Phone Number</p>
            <p style="font-size: 0.875rem; font-weight: 400;">{{profile?.phoneNumber}}</p>
          </div>

          <div class="my-3 align-items-center">
            <p class="mb-1 text-sm" style="font-weight: 400; color: #878787;"><i class="pi pi-map-marker mr-2"
                style="font-size: 13px; font-weight: 500; color: #878787;"></i>Place Address</p>
            <p style="font-size: 0.875rem; font-weight: 400;">{{profile?.address}}</p>
          </div>

          <div class="my-3 align-items-center">
            <p class="mb-1 text-sm" style="font-weight: 400; color: #878787;"><i class="pi pi-money-bill mr-2"
                style="font-size: 13px; font-weight: 500; color: #878787;"></i>Balance</p>
            <p style="font-size: 0.875rem; font-weight: 400;">{{profile?.balance | currency: 'Rp ' :'symbol':'1.2-2'}}
            </p>
          </div>

          <p-divider></p-divider>

          <div class="justify-content-center flex">
            <button pButton pRipple label="Edit Profile" icon="pi pi-pencil" style=" background-color: #4CAF50; "
              class="p-button-raised p-button-success w-7 mt-2 p-button-sm" routerLink="/profile/edit"></button>
          </div>

        </div>
      </div>
    </div>
  </div>

  <div class="col-11 md:col-7 md:ml-4 mt-2">
    <div class="text-xl font-medium text-900 mb-3 align-items-center flex">
      <i class="pi pi-align-justify
      mr-2" style="font-size: 1.4rem; color: #22C55E;"></i>
      <span>My Posts</span>
    </div>

    <div class="surface-card shadow-2 border-round mb-3" infinite-scroll (scrolled)="onScroll()">
      <p-tabView styleClass="tabview-custom" (onChange)="changeTab($event)">
        <p-tabPanel>
          <ng-template pTemplate="header">
            <i class="pi pi-align-justify mr-2"></i>
            <span>Posts</span>
          </ng-template>
          <div *ngFor="let pl of postList; let i=index">
            <div class="p-3">
              <div class="flex align-items-center ">
                <div class="col flex p-0">
                  <img *ngIf="pl.fileId" class="border-circle h-3rem w-3rem mr-2"
                    src="http://localhost:1214/files/{{ pl.fileId }}"
                    style="width: 50px; height: 50 px; object-fit : cover;" alt="profile">
                  <i *ngIf="!pl.fileId"
                    class="pi pi-user border-1 border-circle flex align-items-center justify-content-center bg-gray-50 mr-2"
                    style="font-size: 1rem; color: #a6a8a7; height: 50px; width: 50px;"></i>
                  <div class="flex align-items-center">
                    <div class="flex-column justify-content-start">
                      <p style="font-weight: 450; font-size: 15px;">{{ pl.fullName }}</p>
                      <p style="font-size: 13px;">{{ pl.createdAt | timeAgo }}</p>
                    </div>
                  </div>
                </div>
                <div class="col-5 md:col flex justify-content-end p-0">
                  <div class="align-items-center flex">
                    <ng-container>
                      <div class="lg:flex">
                        <p-tag [rounded]="true" severity="warning" class="justify-content-end flex md:mr-2"
                          *ngIf="pl.isPremium">
                          <p class="my-0 mx-1" style="font-size: 12px; font-weight: 500;">Premium</p>
                        </p-tag>
                        <p-tag [rounded]="true" severity="info" class="md: mr-2">
                          <p class="my-0 mx-1" style="font-size: 12px; font-weight: 500; ">{{ pl.categoryName }}</p>
                        </p-tag>
                      </div>
                      <div class="mt-1 ml-2">
                        <app-tiered-menu [model]="postEdit" topSpace="8px" rightSpace="8px"
                          *ngIf="userId == pl.memberId">
                          <ng-template #content>
                            <i class="pi pi-ellipsis-v cursor-pointer p-0" (click)="getPostId(pl.postId, i)"></i>
                          </ng-template>
                        </app-tiered-menu>
                      </div>
                    </ng-container>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <div *ngIf="!pl.showEdit">
                  <div class="text-xl font-medium text-900 my-2">
                    <p style="font-weight: 700; font-size: 17px;">{{ pl.title }}</p>
                  </div>
                  <div class="font-small">
                    <p class="text-justify"
                      style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px;">
                      {{ pl.content }}
                      <span style="color: black;" *ngIf="pl.isPremium && !(pl.content == pl.contentFull)">...</span>
                      <span *ngIf="pl.isPremium && !(pl.content == pl.contentFull)"
                        class="font-bold cursor-pointer hover:bg-gray-100 border-round-md px-2" style="color: #22C55E;"
                        (click)="showFullContent(i)"> See more</span>
                    </p>
                  </div>
                  <p *ngIf="pl.ver" class="block text-md mt-2" style="font-weight: 400; font-size: 12px; color: black;">
                    (edited)
                  </p>
                </div>
                <form [formGroup]="postEditForm" *ngIf="pl.showEdit">
                  <input type="text" pInputText class="editPostField w-full border-none p-0" formControlName="title"
                    style="font-weight: 700; font-size: 17px;" pAutoFocus [autofocus]="true">
                  <textarea rows="1" cols="30" pInputTextarea [autoResize]="true" formControlName="content"
                    class="editPostField w-full border-none p-0 py-2"
                    style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px;"></textarea>
                  <button style="background-color: 29BA7B;" pButton pRipple type="submit"
                    class="p-button-outlined p-button-rounded p-button-info w-8rem h-2rem p-button-sm p-0 mb-1 mt-3"
                    (click)="updatePost()">
                    <p class="w-full" style="font-style: 20px; font-weight: 700;">Save Changes</p>
                  </button>
                  <button style="background-color: 29BA7B;" pButton pRipple type="button"
                    class="p-button-rounded p-button-text p-button-danger w-6rem h-2rem p-button-sm p-0 ml-2 mb-1"
                    (click)="showEditPost()">
                    <p class="w-full" style="font-style: 20px; font-weight: 700;">Cancel</p>
                  </button>
                </form>
                <div *ngIf="pl.file != null" class="mt-3">
                  <app-post-image [imagesId]="pl.file" [imageOptions]="imageOptions"
                    (clickImage)="clickImage($event, pl.file)">
                  </app-post-image>
                </div>
                <div *ngIf="pl.polling && pl.polling?.userPollingId">
                  <div class="surface-card p-3 border-1 border-round mt-2" style="color:rgb(227, 227, 227)">
                    <p style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px; color:black">
                      {{ pl.polling.content}}</p>
                    <div *ngFor="let p of pl.polling?.pollingDetail">
                      <app-progressbar [label]="p.content" [value]="p.percentage">
                      </app-progressbar>
                    </div>
                  </div>
                </div>
                <div *ngIf="pl.polling && !pl.polling?.userPollingId">
                  <div class="surface-card p-3 border-1 border-round mt-2" style="color:rgb(227, 227, 227)">
                    <p style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px; color:black">
                      {{ pl.polling.content}}</p>
                    <div *ngFor="let dt of pl.polling?.pollingDetail" class="py-2">
                      <button pButton pRipple type="button" label="{{dt.content}}"
                        (click)="insertUserPolling(dt.pollingDetailId, i)"
                        class="p-button-outlined p-button-rounded p-button-secondary bg-green-50 hover:bg-gray-100 w-full"></button>
                    </div>
                  </div>
                </div>
                <div class="justify-content-center flex">
                  <div class="col-12 p-0">
                    <p-divider></p-divider>
                  </div>
                </div>
                <div class="flex">
                  <div class=" align-items-center hover:bg-gray-200 border-round-md cursor-pointer flex px-2 mr-2"
                    *ngIf="!pl.likeId" (click)="insertLikes(pl.postId, i)">
                    <p class="align-items-center flex" style="font-size: 15px; font-weight: 400;">
                      <i class=" pi pi-heart mr-2 cursor-pointer"
                        style="font-size: 18px; font-weight: 400; color: #979797;"></i>
                      {{ pl.likeSum }} Likes
                    </p>
                  </div>
                  <div class=" align-items-center hover:bg-gray-200 border-round-md cursor-pointer flex px-2 mr-2"
                    *ngIf="pl.likeId" (click)="deleteLikes(pl.likeId, i)">
                    <p class="align-items-center flex" style="font-size: 15px; font-weight: 400;">
                      <i class="pi pi-heart-fill mr-2 cursor-pointer"
                        style="font-size: 18px; font-weight: 600; color: #C94C0A;"></i>
                      {{ pl.likeSum }} Likes
                    </p>
                  </div>
                  <div class="align-items-center hover:bg-gray-200 border-round-md cursor-pointer flex px-2"
                    (click)="showComment(i, pl.postId)">
                    <p class="align-items-center flex" style="font-size: 15px; font-weight: 400;"> <i
                        class="pi pi-comments mr-2 cursor-pointer"
                        style="font-size: 18px; font-weight: 400; color: #979797;"></i>{{
                      pl.commentSum }} Comments</p>
                  </div>
                  <div class="col justify-content-end">
                    <p class="bookmark-fill hoverable-element" class="justify-content-end flex"
                      style="font-size: 17px; font-weight: 400;" *ngIf="pl.bookmarkId">
                      <i class="pi pi-bookmark-fill cursor-pointer"
                        style="font-size: 20px; font-weight: 400; color: #0288D1;"
                        (click)="deleteBookmark(pl.bookmarkId, i)">
                      </i>
                    </p>
                    <p class="bookmark hoverable-element" class="justify-content-end flex"
                      style="font-size: 17px; font-weight: 400;" *ngIf="!pl.bookmarkId">
                      <i class="pi pi-bookmark cursor-pointer"
                        style="font-size: 20px; font-weight: 400; color: #979797;"
                        (click)="insertBookmark(pl.postId, i)">
                      </i>
                    </p>
                  </div>
                </div>
                <div *ngIf="pl.showComment">
                  <div class="">
                    <p-divider></p-divider>
                  </div>
                  <div class="flex align-items-center py-2">
                    <img *ngIf="src" src="{{src}}" class="border-circle mr-2"
                      style="object-fit : cover; height: 45px; width: 45px;" alt="profile">
                    <p-button *ngIf="!src" icon="pi pi-user" [disabled]="true"
                      styleClass="p-button-rounded p-button-secondary p-button-outlined w-3rem h-3rem bg-gray-100 mr-2">
                    </p-button>
                    <div class="w-full">
                      <div class="col-12 p-0">
                        <form class="p-inputgroup flex" [formGroup]="comment">
                          <input class="bg-gray-50 hover:bg-gray-300 border-round-sm px-2 w-full" type="text" pInputText
                            placeholder="Comment here" formControlName="content">
                          <button type="submit" pButton pRipple icon="pi pi-send" styleClass="p-button-warn"
                            class="p-button-info" (click)="insertComment(i, pl.postId)"></button>
                        </form>
                      </div>
                    </div>
                  </div>
                  <div class="flex align-items-center mt-4" *ngFor="let cl of pl.commentList; let j=index">
                    <img *ngIf="cl.fileId" src="http://localhost:1214/files/{{ pl.fileId }}" class="border-circle mr-2"
                      style="object-fit : cover; height: 45px; width: 45px;" alt="profile">
                    <p-button *ngIf="!cl.fileId" icon="pi pi-user" [disabled]="true"
                      styleClass="p-button-rounded p-button-secondary p-button-outlined bg-gray-100 mr-2 h-3rem w-3rem">
                    </p-button>
                    <div class="w-full">
                      <div class="shadow-0 border-round-xl border-1 bg-green-50 p-2" style="color:rgb(227, 227, 227);">
                        <div class="flex p-0 pl-1">
                          <div class="col-11 p-0">
                            <div class="flex align-items-center">
                              <p class="block text-md" style="font-weight: 450; font-size: 15px; color: black;">
                                {{ cl.fullName }}
                              </p>
                              <p *ngIf="!cl.showEdit" class="block text-md ml-2"
                                style="font-weight: 400; font-size: 13px; color: black;">
                                {{ cl.createdAt | timeAgo }}
                              </p>

                            </div>
                            <div *ngIf="!cl.showEdit">
                              <p class="block my-2"
                                style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px; color: black;">
                                {{ cl.content }}
                              </p>
                              <p *ngIf="cl.ver " class="block text-md "
                                style="font-weight: 400; font-size: 10px; color: black;">
                                (edited)
                              </p>
                            </div>
                            <form *ngIf="cl.showEdit" [formGroup]="commentEditForm">
                              <textarea rows="1" class="textarea-comment w-full bg-green-50 border-none my-2"
                                pInputTextarea [autoResize]="true" pAutoFocus [autofocus]="true"
                                formControlName="content"></textarea>
                              <button style="background-color: 29BA7B;" pButton pRipple type="submit"
                                class="p-button-outlined p-button-rounded p-button-info w-8rem h-2rem p-button-sm p-0 mb-1"
                                (click)="updateComment()">
                                <p class="w-full" style="font-style: 20px; font-weight: 700;">Save Changes</p>
                              </button>
                              <button style="background-color: 29BA7B;" pButton pRipple type="button"
                                class="p-button-rounded p-button-text p-button-danger w-6rem h-2rem p-button-sm p-0 ml-2 mb-1"
                                (click)="showEditComment()">
                                <p class="w-full" style="font-style: 20px; font-weight: 700;">Cancel</p>
                              </button>
                            </form>
                          </div>
                          <div class="col-1 flex justify-content-end p-0">
                            <app-tiered-menu [model]="commentEdit" topSpace="8px" rightSpace="8px"
                              *ngIf="userId == cl.memberId || userId == pl.memberId">
                              <ng-template #content>
                                <div class="bg-gray-50 hover:bg-gray-300 border-circle w-full p-0 cursor-pointer">
                                  <i class="pi pi-ellipsis-v" style="color: black;"
                                    (click)="getCommentId(cl.commentId, i, j)"></i>
                                </div>
                              </ng-template>
                            </app-tiered-menu>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="flex mt-3 justify-content-center" *ngIf="pl.commentList.length < pl.commentSum">
                    <button pButton pRipple type="button" label="Show more..." class="p-button-secondary p-button-text"
                      (click)="showMoreComment(i, pl.postId)"></button>
                  </div>
                </div>
              </div>
            </div>
            <hr *ngIf="(i+1) < postList.length" class="border-top-3 border-none surface-border" />
          </div>
          <p-scrollTop></p-scrollTop>
        </p-tabPanel>
        <p-tabPanel header="Header II">
          <ng-template pTemplate="header">
            <i class="pi pi-heart-fill mr-2"></i>
            <span>Likes</span>
          </ng-template>
          <div *ngFor="let pl of postList; let i=index">
            <div class="p-3">
              <div class="flex align-items-center ">
                <div class="col flex p-0">
                  <img *ngIf="pl.fileId" class="border-circle h-3rem w-3rem mr-2"
                    src="http://localhost:1214/files/{{ pl.fileId }}"
                    style="width: 50px; height: 50 px; object-fit : cover;" alt="profile">
                  <i *ngIf="!pl.fileId"
                    class="pi pi-user border-1 border-circle flex align-items-center justify-content-center bg-gray-50 mr-2"
                    style="font-size: 1rem; color: #a6a8a7; height: 50px; width: 50px;"></i>
                  <div class="flex align-items-center">
                    <div class="flex-column justify-content-start">
                      <p style="font-weight: 450; font-size: 15px;">{{ pl.fullName }}</p>
                      <p style="font-size: 13px;">{{ pl.createdAt | timeAgo }}</p>
                    </div>
                  </div>
                </div>
                <div class="col flex justify-content-end p-0">
                  <div class="align-items-center flex">
                    <ng-container>
                      <p-tag [rounded]="true" severity="warning" class="mr-2" *ngIf="pl.isPremium">
                        <p class="my-0 mx-1" style="font-size: 12px; font-weight: 500;">Premium</p>
                      </p-tag>
                      <p-tag [rounded]="true" severity="info" class="mr-2">
                        <p class="my-0 mx-1" style="font-size: 12px; font-weight: 500; ">{{ pl.categoryName }}</p>
                      </p-tag>
                      <div class="mt-1 ml-2">
                        <app-tiered-menu [model]="postEdit" topSpace="8px" rightSpace="8px"
                          *ngIf="userId == pl.memberId">
                          <ng-template #content>
                            <i class="pi pi-ellipsis-v cursor-pointer p-0" (click)="getPostId(pl.postId, i)"></i>
                          </ng-template>
                        </app-tiered-menu>
                      </div>
                    </ng-container>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <div *ngIf="!pl.showEdit">
                  <div class="text-xl font-medium text-900 my-2">
                    <p style="font-weight: 700; font-size: 17px;">{{ pl.title }}</p>
                  </div>
                  <div class="font-small">
                    <p class="text-justify"
                      style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px;">
                      {{ pl.content }}
                      <span style="color: black;" *ngIf="pl.isPremium && !(pl.content == pl.contentFull)">...</span>
                      <span *ngIf="pl.isPremium && !(pl.content == pl.contentFull)"
                        class="font-bold cursor-pointer hover:bg-gray-100 border-round-md px-2" style="color: #22C55E;"
                        (click)="showFullContent(i)"> See more</span>
                    </p>
                  </div>
                  <p *ngIf="pl.ver" class="block text-md mt-2" style="font-weight: 400; font-size: 12px; color: black;">
                    (edited)
                  </p>
                </div>
                <form [formGroup]="postEditForm" *ngIf="pl.showEdit">
                  <input type="text" pInputText class="editPostField w-full border-none p-0" formControlName="title"
                    style="font-weight: 700; font-size: 17px;" pAutoFocus [autofocus]="true">
                  <textarea rows="1" cols="30" pInputTextarea [autoResize]="true" formControlName="content"
                    class="editPostField w-full border-none p-0 py-2"
                    style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px;"></textarea>
                  <button style="background-color: 29BA7B;" pButton pRipple type="submit"
                    class="p-button-outlined p-button-rounded p-button-info w-8rem h-2rem p-button-sm p-0 mb-1 mt-3"
                    (click)="updatePost()">
                    <p class="w-full" style="font-style: 20px; font-weight: 700;">Save Changes</p>
                  </button>
                  <button style="background-color: 29BA7B;" pButton pRipple type="button"
                    class="p-button-rounded p-button-text p-button-danger w-6rem h-2rem p-button-sm p-0 ml-2 mb-1"
                    (click)="showEditPost()">
                    <p class="w-full" style="font-style: 20px; font-weight: 700;">Cancel</p>
                  </button>
                </form>
                <div *ngIf="pl.file != null" class="mt-3">
                  <app-post-image [imagesId]="pl.file" [imageOptions]="imageOptions"
                    (clickImage)="clickImage($event, pl.file)">
                  </app-post-image>
                </div>
                <div *ngIf="pl.polling && pl.polling?.userPollingId">
                  <div class="surface-card p-3 border-1 border-round mt-2" style="color:rgb(227, 227, 227)">
                    <p style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px; color:black">
                      {{ pl.polling.content}}</p>
                    <div *ngFor="let p of pl.polling?.pollingDetail">
                      <app-progressbar [label]="p.content" [value]="p.percentage">
                      </app-progressbar>
                    </div>
                  </div>
                </div>
                <div *ngIf="pl.polling && !pl.polling?.userPollingId">
                  <div class="surface-card p-3 border-1 border-round mt-2" style="color:rgb(227, 227, 227)">
                    <p style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px; color:black">
                      {{ pl.polling.content}}</p>
                    <div *ngFor="let dt of pl.polling?.pollingDetail" class="py-2">
                      <button pButton pRipple type="button" label="{{dt.content}}"
                        (click)="insertUserPolling(dt.pollingDetailId, i)"
                        class="p-button-outlined p-button-rounded p-button-secondary bg-green-50 hover:bg-gray-100 w-full"></button>
                    </div>
                  </div>
                </div>
                <div class="justify-content-center flex">
                  <div class="col-12 p-0">
                    <p-divider></p-divider>
                  </div>
                </div>
                <div class="flex">
                  <div class=" align-items-center hover:bg-gray-200 border-round-md cursor-pointer flex px-2 mr-2"
                    *ngIf="!pl.likeId" (click)="insertLikes(pl.postId, i)">
                    <p class="align-items-center flex" style="font-size: 15px; font-weight: 400;">
                      <i class=" pi pi-heart mr-2 cursor-pointer"
                        style="font-size: 18px; font-weight: 400; color: #979797;"></i>
                      {{ pl.likeSum }} Likes
                    </p>
                  </div>
                  <div class=" align-items-center hover:bg-gray-200 border-round-md cursor-pointer flex px-2 mr-2"
                    *ngIf="pl.likeId" (click)="deleteLikes(pl.likeId, i)">
                    <p class="align-items-center flex" style="font-size: 15px; font-weight: 400;">
                      <i class="pi pi-heart-fill mr-2 cursor-pointer"
                        style="font-size: 18px; font-weight: 600; color: #C94C0A;"></i>
                      {{ pl.likeSum }} Likes
                    </p>
                  </div>
                  <div class="align-items-center hover:bg-gray-200 border-round-md cursor-pointer flex px-2"
                    (click)="showComment(i, pl.postId)">
                    <p class="align-items-center flex" style="font-size: 15px; font-weight: 400;"> <i
                        class="pi pi-comments mr-2 cursor-pointer"
                        style="font-size: 18px; font-weight: 400; color: #979797;"></i>{{
                      pl.commentSum }} Comments</p>
                  </div>
                  <div class="col justify-content-end">
                    <p class="bookmark-fill hoverable-element" class="justify-content-end flex"
                      style="font-size: 17px; font-weight: 400;" *ngIf="pl.bookmarkId">
                      <i class="pi pi-bookmark-fill cursor-pointer"
                        style="font-size: 20px; font-weight: 400; color: #0288D1;"
                        (click)="deleteBookmark(pl.bookmarkId, i)">
                      </i>
                    </p>
                    <p class="bookmark hoverable-element" class="justify-content-end flex"
                      style="font-size: 17px; font-weight: 400;" *ngIf="!pl.bookmarkId">
                      <i class="pi pi-bookmark cursor-pointer"
                        style="font-size: 20px; font-weight: 400; color: #979797;"
                        (click)="insertBookmark(pl.postId, i)">
                      </i>
                    </p>
                  </div>
                </div>
                <div *ngIf="pl.showComment">
                  <div class="">
                    <p-divider></p-divider>
                  </div>
                  <div class="flex align-items-center py-2">
                    <img *ngIf="src" src="{{src}}" class="border-circle mr-2"
                      style="object-fit : cover; height: 45px; width: 45px;" alt="profile">
                    <p-button *ngIf="!src" icon="pi pi-user" [disabled]="true"
                      styleClass="p-button-rounded p-button-secondary p-button-outlined w-3rem h-3rem bg-gray-100 mr-2">
                    </p-button>
                    <div class="w-full">
                      <div class="col-12 p-0">
                        <form class="p-inputgroup flex" [formGroup]="comment">
                          <input class="bg-gray-50 hover:bg-gray-300 border-round-sm px-2 w-full" type="text" pInputText
                            placeholder="Comment here" formControlName="content">
                          <button type="submit" pButton pRipple icon="pi pi-send" styleClass="p-button-warn"
                            class="p-button-info" (click)="insertComment(i, pl.postId)"></button>
                        </form>
                      </div>
                    </div>
                  </div>
                  <div class="flex align-items-center mt-4" *ngFor="let cl of pl.commentList; let j=index">
                    <img *ngIf="cl.fileId" src="http://localhost:1214/files/{{ pl.fileId }}" class="border-circle mr-2"
                      style="object-fit : cover; height: 45px; width: 45px;" alt="profile">
                    <p-button *ngIf="!cl.fileId" icon="pi pi-user" [disabled]="true"
                      styleClass="p-button-rounded p-button-secondary p-button-outlined bg-gray-100 mr-2 h-3rem w-3rem">
                    </p-button>
                    <div class="w-full">
                      <div class="shadow-0 border-round-xl border-1 bg-green-50 p-2" style="color:rgb(227, 227, 227);">
                        <div class="flex p-0 pl-1">
                          <div class="col-11 p-0">
                            <div class="flex align-items-center">
                              <p class="block text-md" style="font-weight: 450; font-size: 15px; color: black;">
                                {{ cl.fullName }}
                              </p>
                              <p *ngIf="!cl.showEdit" class="block text-md ml-2"
                                style="font-weight: 400; font-size: 13px; color: black;">
                                {{ cl.createdAt | timeAgo }}
                              </p>

                            </div>
                            <div *ngIf="!cl.showEdit">
                              <p class="block my-2"
                                style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px; color: black;">
                                {{ cl.content }}
                              </p>
                              <p *ngIf="cl.ver " class="block text-md "
                                style="font-weight: 400; font-size: 10px; color: black;">
                                (edited)
                              </p>
                            </div>
                            <form *ngIf="cl.showEdit" [formGroup]="commentEditForm">
                              <textarea rows="1" class="textarea-comment w-full bg-green-50 border-none my-2"
                                pInputTextarea [autoResize]="true" pAutoFocus [autofocus]="true"
                                formControlName="content"></textarea>
                              <button style="background-color: 29BA7B;" pButton pRipple type="submit"
                                class="p-button-outlined p-button-rounded p-button-info w-8rem h-2rem p-button-sm p-0 mb-1"
                                (click)="updateComment()">
                                <p class="w-full" style="font-style: 20px; font-weight: 700;">Save Changes</p>
                              </button>
                              <button style="background-color: 29BA7B;" pButton pRipple type="button"
                                class="p-button-rounded p-button-text p-button-danger w-6rem h-2rem p-button-sm p-0 ml-2 mb-1"
                                (click)="showEditComment()">
                                <p class="w-full" style="font-style: 20px; font-weight: 700;">Cancel</p>
                              </button>
                            </form>
                          </div>
                          <div class="col-1 flex justify-content-end p-0">
                            <app-tiered-menu [model]="commentEdit" topSpace="8px" rightSpace="8px"
                              *ngIf="userId == cl.memberId || userId == pl.memberId">
                              <ng-template #content>
                                <div class="bg-gray-50 hover:bg-gray-300 border-circle w-full p-0 cursor-pointer">
                                  <i class="pi pi-ellipsis-v" style="color: black;"
                                    (click)="getCommentId(cl.commentId, i, j)"></i>
                                </div>
                              </ng-template>
                            </app-tiered-menu>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="flex mt-3 justify-content-center" *ngIf="pl.commentList.length < pl.commentSum">
                    <button pButton pRipple type="button" label="Show more..." class="p-button-secondary p-button-text"
                      (click)="showMoreComment(i, pl.postId)"></button>
                  </div>
                </div>
              </div>
            </div>
            <hr *ngIf="(i+1) < postList.length" class="border-top-3 border-none surface-border" />
          </div>
        </p-tabPanel>
        <p-tabPanel header="Header III">
          <ng-template pTemplate="header">
            <i class="pi pi-bookmark-fill mr-2"></i>
            <span>Bookmark</span>
          </ng-template>
          <div *ngFor="let pl of postList; let i=index">
            <div class="p-3">
              <div class="flex align-items-center ">
                <div class="col flex p-0">
                  <img *ngIf="pl.fileId" class="border-circle h-3rem w-3rem mr-2"
                    src="http://localhost:1214/files/{{ pl.fileId }}"
                    style="width: 50px; height: 50 px; object-fit : cover;" alt="profile">
                  <i *ngIf="!pl.fileId"
                    class="pi pi-user border-1 border-circle flex align-items-center justify-content-center bg-gray-50 mr-2"
                    style="font-size: 1rem; color: #a6a8a7; height: 50px; width: 50px;"></i>
                  <div class="flex align-items-center">
                    <div class="flex-column justify-content-start">
                      <p style="font-weight: 450; font-size: 15px;">{{ pl.fullName }}</p>
                      <p style="font-size: 13px;">{{ pl.createdAt | timeAgo }}</p>
                    </div>
                  </div>
                </div>
                <div class="col flex justify-content-end p-0">
                  <div class="align-items-center flex">
                    <ng-container>
                      <p-tag [rounded]="true" severity="warning" class="mr-2" *ngIf="pl.isPremium">
                        <p class="my-0 mx-1" style="font-size: 12px; font-weight: 500;">Premium</p>
                      </p-tag>
                      <p-tag [rounded]="true" severity="info" class="mr-2">
                        <p class="my-0 mx-1" style="font-size: 12px; font-weight: 500; ">{{ pl.categoryName }}</p>
                      </p-tag>
                      <div class="mt-1 ml-2">
                        <app-tiered-menu [model]="postEdit" topSpace="8px" rightSpace="8px"
                          *ngIf="userId == pl.memberId">
                          <ng-template #content>
                            <i class="pi pi-ellipsis-v cursor-pointer p-0" (click)="getPostId(pl.postId, i)"></i>
                          </ng-template>
                        </app-tiered-menu>
                      </div>
                    </ng-container>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <div *ngIf="!pl.showEdit">
                  <div class="text-xl font-medium text-900 my-2">
                    <p style="font-weight: 700; font-size: 17px;">{{ pl.title }}</p>
                  </div>
                  <div class="font-small">
                    <p class="text-justify"
                      style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px;">
                      {{ pl.content }}
                      <span style="color: black;" *ngIf="pl.isPremium && !(pl.content == pl.contentFull)">...</span>
                      <span *ngIf="pl.isPremium && !(pl.content == pl.contentFull)"
                        class="font-bold cursor-pointer hover:bg-gray-100 border-round-md px-2" style="color: #22C55E;"
                        (click)="showFullContent(i)"> See more</span>
                    </p>
                  </div>
                  <p *ngIf="pl.ver" class="block text-md mt-2" style="font-weight: 400; font-size: 12px; color: black;">
                    (edited)
                  </p>
                </div>
                <form [formGroup]="postEditForm" *ngIf="pl.showEdit">
                  <input type="text" pInputText class="editPostField w-full border-none p-0" formControlName="title"
                    style="font-weight: 700; font-size: 17px;" pAutoFocus [autofocus]="true">
                  <textarea rows="1" cols="30" pInputTextarea [autoResize]="true" formControlName="content"
                    class="editPostField w-full border-none p-0 py-2"
                    style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px;"></textarea>
                  <button style="background-color: 29BA7B;" pButton pRipple type="submit"
                    class="p-button-outlined p-button-rounded p-button-info w-8rem h-2rem p-button-sm p-0 mb-1 mt-3"
                    (click)="updatePost()">
                    <p class="w-full" style="font-style: 20px; font-weight: 700;">Save Changes</p>
                  </button>
                  <button style="background-color: 29BA7B;" pButton pRipple type="button"
                    class="p-button-rounded p-button-text p-button-danger w-6rem h-2rem p-button-sm p-0 ml-2 mb-1"
                    (click)="showEditPost()">
                    <p class="w-full" style="font-style: 20px; font-weight: 700;">Cancel</p>
                  </button>
                </form>
                <div *ngIf="pl.file != null" class="mt-3">
                  <app-post-image [imagesId]="pl.file" [imageOptions]="imageOptions"
                    (clickImage)="clickImage($event, pl.file)">
                  </app-post-image>
                </div>
                <div *ngIf="pl.polling && pl.polling?.userPollingId">
                  <div class="surface-card p-3 border-1 border-round mt-2" style="color:rgb(227, 227, 227)">
                    <p style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px; color:black">
                      {{ pl.polling.content}}</p>
                    <div *ngFor="let p of pl.polling?.pollingDetail">
                      <app-progressbar [label]="p.content" [value]="p.percentage">
                      </app-progressbar>
                    </div>
                  </div>
                </div>
                <div *ngIf="pl.polling && !pl.polling?.userPollingId">
                  <div class="surface-card p-3 border-1 border-round mt-2" style="color:rgb(227, 227, 227)">
                    <p style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px; color:black">
                      {{ pl.polling.content}}</p>
                    <div *ngFor="let dt of pl.polling?.pollingDetail" class="py-2">
                      <button pButton pRipple type="button" label="{{dt.content}}"
                        (click)="insertUserPolling(dt.pollingDetailId, i)"
                        class="p-button-outlined p-button-rounded p-button-secondary bg-green-50 hover:bg-gray-100 w-full"></button>
                    </div>
                  </div>
                </div>
                <div class="justify-content-center flex">
                  <div class="col-12 p-0">
                    <p-divider></p-divider>
                  </div>
                </div>
                <div class="flex">
                  <div class=" align-items-center hover:bg-gray-200 border-round-md cursor-pointer flex px-2 mr-2"
                    *ngIf="!pl.likeId" (click)="insertLikes(pl.postId, i)">
                    <p class="align-items-center flex" style="font-size: 15px; font-weight: 400;">
                      <i class=" pi pi-heart mr-2 cursor-pointer"
                        style="font-size: 18px; font-weight: 400; color: #979797;"></i>
                      {{ pl.likeSum }} Likes
                    </p>
                  </div>
                  <div class=" align-items-center hover:bg-gray-200 border-round-md cursor-pointer flex px-2 mr-2"
                    *ngIf="pl.likeId" (click)="deleteLikes(pl.likeId, i)">
                    <p class="align-items-center flex" style="font-size: 15px; font-weight: 400;">
                      <i class="pi pi-heart-fill mr-2 cursor-pointer"
                        style="font-size: 18px; font-weight: 600; color: #C94C0A;"></i>
                      {{ pl.likeSum }} Likes
                    </p>
                  </div>
                  <div class="align-items-center hover:bg-gray-200 border-round-md cursor-pointer flex px-2"
                    (click)="showComment(i, pl.postId)">
                    <p class="align-items-center flex" style="font-size: 15px; font-weight: 400;"> <i
                        class="pi pi-comments mr-2 cursor-pointer"
                        style="font-size: 18px; font-weight: 400; color: #979797;"></i>{{
                      pl.commentSum }} Comments</p>
                  </div>
                  <div class="col justify-content-end">
                    <p class="bookmark-fill hoverable-element" class="justify-content-end flex"
                      style="font-size: 17px; font-weight: 400;" *ngIf="pl.bookmarkId">
                      <i class="pi pi-bookmark-fill cursor-pointer"
                        style="font-size: 20px; font-weight: 400; color: #0288D1;"
                        (click)="deleteBookmark(pl.bookmarkId, i)">
                      </i>
                    </p>
                    <p class="bookmark hoverable-element" class="justify-content-end flex"
                      style="font-size: 17px; font-weight: 400;" *ngIf="!pl.bookmarkId">
                      <i class="pi pi-bookmark cursor-pointer"
                        style="font-size: 20px; font-weight: 400; color: #979797;"
                        (click)="insertBookmark(pl.postId, i)">
                      </i>
                    </p>
                  </div>
                </div>
                <div *ngIf="pl.showComment">
                  <div class="">
                    <p-divider></p-divider>
                  </div>
                  <div class="flex align-items-center py-2">
                    <img *ngIf="src" src="{{src}}" class="border-circle mr-2"
                      style="object-fit : cover; height: 45px; width: 45px;" alt="profile">
                    <p-button *ngIf="!src" icon="pi pi-user" [disabled]="true"
                      styleClass="p-button-rounded p-button-secondary p-button-outlined w-3rem h-3rem bg-gray-100 mr-2">
                    </p-button>
                    <div class="w-full">
                      <div class="col-12 p-0">
                        <form class="p-inputgroup flex" [formGroup]="comment">
                          <input class="bg-gray-50 hover:bg-gray-300 border-round-sm px-2 w-full" type="text" pInputText
                            placeholder="Comment here" formControlName="content">
                          <button type="submit" pButton pRipple icon="pi pi-send" styleClass="p-button-warn"
                            class="p-button-info" (click)="insertComment(i, pl.postId)"></button>
                        </form>
                      </div>
                    </div>
                  </div>
                  <div class="flex align-items-center mt-4" *ngFor="let cl of pl.commentList; let j=index">
                    <img *ngIf="cl.fileId" src="http://localhost:1214/files/{{ pl.fileId }}" class="border-circle mr-2"
                      style="object-fit : cover; height: 45px; width: 45px;" alt="profile">
                    <p-button *ngIf="!cl.fileId" icon="pi pi-user" [disabled]="true"
                      styleClass="p-button-rounded p-button-secondary p-button-outlined bg-gray-100 mr-2 h-3rem w-3rem">
                    </p-button>
                    <div class="w-full">
                      <div class="shadow-0 border-round-xl border-1 bg-green-50 p-2" style="color:rgb(227, 227, 227);">
                        <div class="flex p-0 pl-1">
                          <div class="col-11 p-0">
                            <div class="flex align-items-center">
                              <p class="block text-md" style="font-weight: 450; font-size: 15px; color: black;">
                                {{ cl.fullName }}
                              </p>
                              <p *ngIf="!cl.showEdit" class="block text-md ml-2"
                                style="font-weight: 400; font-size: 13px; color: black;">
                                {{ cl.createdAt | timeAgo }}
                              </p>

                            </div>
                            <div *ngIf="!cl.showEdit">
                              <p class="block my-2"
                                style="text-align: justify; font-size: 15px; font-weight: 400; line-height: 25px; color: black;">
                                {{ cl.content }}
                              </p>
                              <p *ngIf="cl.ver " class="block text-md "
                                style="font-weight: 400; font-size: 10px; color: black;">
                                (edited)
                              </p>
                            </div>
                            <form *ngIf="cl.showEdit" [formGroup]="commentEditForm">
                              <textarea rows="1" class="textarea-comment w-full bg-green-50 border-none my-2"
                                pInputTextarea [autoResize]="true" pAutoFocus [autofocus]="true"
                                formControlName="content"></textarea>
                              <button style="background-color: 29BA7B;" pButton pRipple type="submit"
                                class="p-button-outlined p-button-rounded p-button-info w-8rem h-2rem p-button-sm p-0 mb-1"
                                (click)="updateComment()">
                                <p class="w-full" style="font-style: 20px; font-weight: 700;">Save Changes</p>
                              </button>
                              <button style="background-color: 29BA7B;" pButton pRipple type="button"
                                class="p-button-rounded p-button-text p-button-danger w-6rem h-2rem p-button-sm p-0 ml-2 mb-1"
                                (click)="showEditComment()">
                                <p class="w-full" style="font-style: 20px; font-weight: 700;">Cancel</p>
                              </button>
                            </form>
                          </div>
                          <div class="col-1 flex justify-content-end p-0">
                            <app-tiered-menu [model]="commentEdit" topSpace="8px" rightSpace="8px"
                              *ngIf="userId == cl.memberId || userId == pl.memberId">
                              <ng-template #content>
                                <div class="bg-gray-50 hover:bg-gray-300 border-circle w-full p-0 cursor-pointer">
                                  <i class="pi pi-ellipsis-v" style="color: black;"
                                    (click)="getCommentId(cl.commentId, i, j)"></i>
                                </div>
                              </ng-template>
                            </app-tiered-menu>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="flex mt-3 justify-content-center" *ngIf="pl.commentList.length < pl.commentSum">
                    <button pButton pRipple type="button" label="Show more..." class="p-button-secondary p-button-text"
                      (click)="showMoreComment(i, pl.postId)"></button>
                  </div>
                </div>
              </div>
            </div>
            <hr *ngIf="(i+1) < postList.length" class="border-top-3 border-none surface-border" />
          </div>
        </p-tabPanel>
      </p-tabView>
    </div>
  </div>
</div>


<p-galleria [value]="imageGalleria" [visible]="previewImage" (visibleChange)="onCloseImagePreview()"
  [containerStyle]="{ 'max-width': '50%' }" [numVisible]="3" [circular]="true" [fullScreen]="true"
  [activeIndex]="activeImagePreview" [showItemNavigators]="true" [showThumbnails]="false">
  <ng-template pTemplate="item" let-item>
    <img src="http://localhost:1214/files/{{ item }}" style="width: 100%; display: block;" />
  </ng-template>
</p-galleria>